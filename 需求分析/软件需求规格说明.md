| 变更人员 | 变更日期 | 变更内容 | 版本号 |
| -------- | ------ | -------- | ------ |
|          |      |          |        |
# 1.引言
## 1.1目的
本文档描述了铁路在线订票系统的部分用户需求

## 1.2范围
铁路在线订票系统意欲解决传统的⻋票预定购买模式的一些缺陷，提供更加便捷的订票服务。
本文档主要描述了铁路在线订票系统的部分用户需求，目前包括客户个人信息管理、浏览车票详细信息、购买车票，铁路管理员铁路信息管理（线路编排）及车票信息管理等功能。

## 1.3参考文献
1. 《软件开发的技术基础》

# 2.总体描述
## 2.1产品前景
随着⼯作和⽣活节奏的加快，⼈们差旅出⾏的需求迅速提升，但传统的⻋票预定购买模式有着
许多不便之处：

1. 售票效率低：传统售票采⽤现⾦⽀付，⽕⻋站售票窗⼝需要现⾦收取，给⽤户带来颇多不便，也影响了售票效率；
2. 信息不及时：铁路传统售票只能提供有限的信息，售票员难以及时更新⻋票信息，影响⽤户准确购票；
3. 抢票难度⼤：传统售票模式下，⽤户必须提前⼀段时间到达⽕⻋站排队抢票，给⽤户带来不便；

为了解决上述问题，⽅便⼈们购买出⾏的⻋票，决定开发⼀个互联⽹购票乘⻋系统，该系统包括一个数据集中的服务端和多个分布式客户端。服务端主要负责数据的存储和管理，客户端主要负责数据的展示和交互，服务端与客户端以实时通信的方式完成数据交换。

## 2.2产品功能
SF1: 客户个人信息管理
SF2: 客户浏览车票详细信息
SF3: 客户购买车票
SF4: 铁路管理员铁路信息管理（线路编排）
SF5: 铁路管理员车票信息管理

## 2.3用户特征
<table>
<tr>
    <td>用户</td>
    <td>描述</td>
</tr>
<tr>
    <td>客户</td>
    <td>整个系统有多个客户，客户可以通过铁路在线订票系统查询车票信息，购买车票，查看个人信息，修改个人信息等功能。</td>
</tr>
<tr>
    <td>铁路管理员</td>
    <td>铁路管理员可以通过铁路在线订票系统管理铁路信息，管理车票信息等功能。</td>
</tr>
</table>

## 2.4约束
CON1: 本系统可以跨平台运行。
CON2: ⽤户和铁路局⼯作⼈员分布在不同的地⽅、所以要提供各⾃的web应⽤部署。
CON4: 为了防⽌信息泄露，⽤户的账号、密码、联系⽅式等信息要使⽤密⽂存储。
CON5: 系统便于使用，所有类型⼈员不需要进过专⻔培训，就可以在10分钟内完成⼀个操作任务。
CON6: 在开发中，开发者要提交软件需求规格说明书，设计描述文档和测试报告。

## 2.5假设和依赖
AE1: ⽹络通畅，不会发⽣故障。
AE2: 所有操作任务的完成时间不会超过1⼩时，即使⽤、暂停与中断不会超过1⼩时。
AE3: 系统不需要处理费⽤问题。
AE4: ⽤户异常订单不需要系统处理，线下进⾏。

# 3.详细需求描述
## 3.1对外接口需求
### 3.1.1用户界面
用户界面是系统的⼀个重要组成部分，它是⽤户与系统交互的⼀个接⼝，⽤户可以通过用户界面完成系统的各种操作。用户界面包括⽤户界⾯和管理员界⾯。

### 3.1.2通信接口

## 3.2功能需求
### 3.2.1客户个人信息管理
#### 3.2.1.1特性描述
客户需要修改个人信息时，如果通过身份认证，可以进入个人信息管理界面，修改个人信息。
优先级：中

#### 3.2.1.2刺激/响应序列
刺激：客户点击修改个人信息按钮<br>
响应：系统验证客户身份，如果通过身份认证，系统进入个人信息管理界面，否则系统提示客户身份认证失败。<br>
刺激：客户输入个人信息<br>
响应：系统显示个人信息修改，校验个人信息，并提示是否合法。<br>
刺激：客户点击确认按钮<br>
响应：系统保存个人信息，提示客户个人信息修改成功。<br>
刺激：客户点击取消按钮<br>
响应：系统不保存，返回个人信息管理界面。<br>

#### 3.2.1.3相关功能需求
<table>
<tr>
    <td>
    UserInfo.Enter
    </td>
    <td>
    系统进入个人信息管理界面
    </td>
</tr>
<tr>
    <td>
    UserInfo.Check
    </td>
    <td>
    系统校验客户身份
    </td>
</tr>
<tr>
    <td>
    UserInfo.Input<br>
    UserInfo.Input.Invalid
    </td>
    <td>
    系统修改个人信息<br>
    若输入信息不合法，系统提示客户输入信息不合法
    </td>
</tr>
<tr>
    <td>
    UserInfo.Save.Fail<br>
    UserInfo.Save.Success
    </td>
    <td>
    若保存失败，系统提示客户个人信息修改失败<br>
    若保存成功，系统提示客户个人信息修改成功
    </td>
</tr>
<tr>
    <td>
    UserInfo.Return
    </td>
    <td>
    系统返回个人信息管理界面
    </td>
</tr>
</table>

### 3.2.2客户浏览车票详细信息
#### 3.2.2.1特性描述
客户需要浏览车票详细信息时，可进入车票信息管理界面，查询余票。
优先级：中

#### 3.2.2.2刺激/响应序列
刺激：客户点击出发地和目的地以及出行日期按钮<br>
响应：系统进入车票信息管理界面，展示满足条件的余票列表<br>
刺激：客户点击某张车票按钮<br>
响应：系统显示该车票的细节信息<br>
刺激：客户点击筛选按钮<br>
响应：系统显示价格升序，价格降序，时间升序，时间降序按钮<br>
刺激：客户点击价格升序，价格降序，时间升序，时间降序按钮<br>
响应：系统将余票列表按价格升序，价格降序，时间升序，时间降序排列<br>

#### 3.2.2.3相关功能需求
<table>
<tr>
    <td>
    Ticket.Show
    </td>
    <td>
    系统进入车票信息管理界面
    </td>
</tr>
<tr>
    <td>
    Ticket.Search.Departure<br>
    Ticket.Search.Destination <br>
    Ticket.Search.Date 
    </td>
    <td>
    选择始发地<br>
    选择目的地<br>
    选择日期
    </td>
</tr>
<tr>
    <td>
    Ticket.List.Show
    </td>
    <td>
    系统显示余票列表
    </td>
</tr>
<tr>
    <td>
    Ticket.Pick<br>
    Ticket.Pick.Invalid
    </td>
    <td>
    系统单独选定某张车票<br>
    若余票已被购买，系统提示提示该余票已经被购买，请选择其他余票
    </td>
</tr>
<tr>
    <td>
    Ticket.Pick.Show
    </td>
    <td>
    系统展示该车票的细节信息
    </td>
</tr>
</table>

### 3.2.3客户购买车票
#### 3.2.3.1特性描述
客户通过身份验证后，选择车票进行购买
优先级：中

#### 3.2.3.2刺激/响应序列
刺激：客户点击购买车票按钮<br>
响应：系统根据客户信用积分，积分不足显示不支持购票，积分足够显示车票金额<br>
刺激：客户点击使用积分按钮<br>
响应：系统将积分折现与车票金额抵消后，显示车票金额<br>
刺激：客户点击确认购票按钮<br>
响应：系统跳转至支付界面，将余票保留<br>
刺激：客户点击放弃支付按钮<br>
响应：系统显示支付失败，回到车票信息管理界面，恢复余票，回复积分<br>
刺激：客户支付完成<br>
响应：系统显示支付成功，回到车票信息管理界面，更新余票信息，客户信用信息，客户积分信息<br>

#### 3.2.3.3相关功能需求
<table>
<tr>
    <td>
    Ticket.UserInfo.Entry
    </td>
    <td>
    系统进入用户登录后的车票信息管理界面
    </td>
</tr>
<tr>
    <td>
    Ticket.Pick.Pay.Enter
    </td>
    <td>
    系统进入购买车票界面
    </td>
</tr>
<tr>
    <td>
    Ticket.Pick.Pay.Purchase<br>
    Ticket.Pick.Pay.Purchase.Invalid
    </td>
    <td>
    系统跳转入支付接口
    若放弃支付，或信用过低，系统提示支付失败
    </td>
</tr>
<tr>
    <td>
    Ticket.UserInfo.Credibility
    </td>
    <td>
    系统提示客户信用分数
    </td>
</tr>
<tr>
    <td>
    Ticket.UserInfo.Point
    </td>
    <td>
    系统提示客户积分状况
    </td>
</tr>
<tr>
    <td>
    Ticket.Pick.Return
    </td>
    <td>
    系统返回车票信息管理界面
    </td>
</tr>
</table>

### 3.2.4铁路管理员管理铁路信息
#### 3.2.4.1特性描述
铁路管理员需要修改铁路信息时，如果通过身份认证，可以进入铁路信息管理界面，修改铁路信息。
优先级：中

#### 3.2.4.2刺激/响应序列
刺激：铁路管理员点击修改线路信息按钮<br>
响应：系统验证铁路管理员身份，如果通过身份认证，系统进入铁路信息管理界面，否则系统提示铁路管理员身份认证失败。<br>
刺激：铁路管理员输入线路信息<br>
响应：系统显示线路信息修改，校验线路路信息，并提示是否合法。若合法，更新余票信息<br>
刺激：铁路管理员点击确认按钮<br>
响应：系统保存铁路更新信息，提示铁路管理员铁路信息修改成功。<br>
刺激：铁路管理员点击取消按钮<br>
响应：系统不保存，返回铁路信息管理界面。<br>

#### 3.2.4.3相关功能需求
<table>
<tr>
    <td>
    Railadmin.Enter
    </td>
    <td>
    系统进入铁路信息管理界面
    </td>
</tr>
<tr>
    <td>
    Railadmin.Check
    </td>
    <td>
    系统校验铁路管理员身份
    </td>
</tr>
<tr>
    <td>
    Railadmin.Input<br>
    Railadmin.Input.Invalid
    </td>
    <td>
    系统修改线路信息<br>
    若输入信息不合法，系统提示铁路管理员输入信息不合法
    </td>
</tr>
<tr>
    <td>  
    Ticket.Update
    </td>
    <td>  
    系统更新余票信息
    </td>
</tr>
<tr>
    <td>
    Railadmin.Save.Fail<br>
    Railadmin.Save.Success
    </td>
    <td>
    若保存失败，系统提示铁路管理员线路信息修改失败<br>
    若保存成功，系统提示铁路管理员线路信息修改成功
    </td>
</tr>
<tr>
    <td>
    Railadmin.Return
    </td>
    <td>
    系统返回铁路信息管理界面
    </td>
</tr>
</table>

### 3.2.5铁路管理员管理车票信息
#### 3.2.5.1特性描述
铁路管理员需要更新车票详细信息时，如果通过身份认证，可进入车票信息管理界面，查询余票。
优先级：中

#### 3.2.2.2刺激/响应序列
刺激：铁路管理员点击修改某车票信息按钮<br>
响应：系统验证铁路管理员身份，如果通过身份认证，系统进入车票信息管理界面，否则系统提示铁路管理员身份认证失败。<br>
刺激：铁路管理员输入车票信息<br>
响应：系统显示车票信息修改，校验线路路信息，并提示是否合法。若合法，更新车票信息，推送给已购车票客户<br>
刺激：铁路管理员点击确认按钮<br>
响应：系统保存车票更新信息，提示铁路管理员车票信息修改成功。<br>
刺激：铁路管理员点击取消按钮<br>
响应：系统不保存，返回车票信息管理界面。<br>

#### 3.2.2.3相关功能需求
<table>
<tr>
    <td>
    Ticket.Railadmin.Entry
    </td>
    <td>
    系统进入铁路管理员登陆后的车票信息管理界面
    </td>
</tr>
<tr>
    <td>
    Ticket.Input<br>
    Ticket.Input.Invalid
    </td>
    <td>
    系统修改车票信息<br>
    若输入信息不合法，系统提示铁路管理员输入信息不合法
    </td>
</tr>
<tr>
    <td>  
    Ticket.Input.Post
    </td>
    <td>  
    系统将更新的车票信息推送给每位购过票的客户
    </td>
</tr>
<tr>
    <td>
    Ticket.Save.Fail<br>
    ticket.Save.Success
    </td>
    <td>
    若保存失败，系统提示铁路管理员线路信息修改失败<br>
    若保存成功，系统提示铁路管理员线路信息修改成功
    </td>
</tr>
<tr>
    <td>
    ticket.Return
    </td>
    <td>
    系统返回无人登录的铁路信息管理界面
    </td>
</tr>
</table>

## 3.3非功能需求
### 3.3.1安全性
Safety1：系统应该对用户的个人信息进行加密存储，防止用户个人信息泄露。
Safety2：系统应该按照用户身份进行权限管理，防止非法用户对系统进行恶意操作。

### 3.3.2易用性
Usability1：系统应该提供友好的用户界面，所有类型⼈员不需要进过专⻔培训，就可以在10分钟内完成⼀个操作任务。

## 3.4数据需求
### 3.4.1数据定义
DR1：系统需要存储的数据实体及关系详见概念类图。

### 3.4.2默认数据
DD1：用户默认身份为客户（未登录）。
DD2：积分默认为0。

### 3.4.3数据格式要求
DF1：用户密码应当具有一定复杂度。
DF2：用户手机号应当为11位数字。
DF3：用户邮箱应当符合邮箱格式。
DF4：用户身份证号应当为18位数字。
DF5：日期格式应当为YYYY-MM-DD。
DF6：时间格式应当为HH:MM:SS。
DF7：价格格式应当是大于0、精确到小数点后两位的数字，单位元。